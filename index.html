<!DOCTYPE html>
<html>
<head>
    <title>Motorcycle Geometry Calculator (Iterative)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 600px;
            margin: auto;
        }
        input {
            margin-bottom: 10px;
            padding: 5px;
            width: 100%;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        button {
            padding: 6px 12px;
            background-color: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
            margin-bottom: 10px;
            margin-right: 10px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .results {
            margin-top: 20px;
            font-weight: bold;
        }
        .side-panel {
            margin-top: 40px;
            border: 1px solid #ccc;
            padding: 10px;
        }
        .side-panel h2 {
            margin-top: 0;
        }
        .delete-btn {
            margin-left: 15px;
            background-color: #dc3545;
        }
        .delete-btn:hover {
            background-color: #c82333;
        }
        .load-btn {
            margin-left: 15px;
            background-color: #28a745;
        }
        .load-btn:hover {
            background-color: #218838;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Motorcycle Geometry Calculator (Iterative)</h1>

    <!-- FRONT WHEEL/TIRE -->
    <label for="initial-front-wheel">Initial Front Wheel Diameter (inches):</label>
    <input type="number" id="initial-front-wheel" step="1" value="21">

    <label for="initial-front-tire-width">Initial Front Tire Width (mm):</label>
    <input type="number" id="initial-front-tire-width" step="1" value="90">

    <label for="initial-front-aspect-ratio">Initial Front Tire Aspect Ratio (%):</label>
    <input type="number" id="initial-front-aspect-ratio" step="1" value="90">

    <!-- REAR WHEEL/TIRE -->
    <label for="initial-rear-wheel">Initial Rear Wheel Diameter (inches):</label>
    <input type="number" id="initial-rear-wheel" step="1" value="18">

    <label for="initial-rear-tire-width">Initial Rear Tire Width (mm):</label>
    <input type="number" id="initial-rear-tire-width" step="1" value="120">

    <label for="initial-rear-aspect-ratio">Initial Rear Tire Aspect Ratio (%):</label>
    <input type="number" id="initial-rear-aspect-ratio" step="1" value="90">

    <!-- NEW FRONT/REAR WHEEL/TIRE -->
    <label for="new-front-wheel">New Front Wheel Diameter (inches):</label>
    <input type="number" id="new-front-wheel" step="1" value="21">

    <label for="new-front-tire-width">New Front Tire Width (mm):</label>
    <input type="number" id="new-front-tire-width" step="1" value="90">

    <label for="new-front-aspect-ratio">New Front Tire Aspect Ratio (%):</label>
    <input type="number" id="new-front-aspect-ratio" step="1" value="90">

    <label for="new-rear-wheel">New Rear Wheel Diameter (inches):</label>
    <input type="number" id="new-rear-wheel" step="1" value="18">

    <label for="new-rear-tire-width">New Rear Tire Width (mm):</label>
    <input type="number" id="new-rear-tire-width" step="1" value="120">

    <label for="new-rear-aspect-ratio">New Rear Tire Aspect Ratio (%):</label>
    <input type="number" id="new-rear-aspect-ratio" step="1" value="90">

    <!-- RAKE, WHEELBASE -->
    <label for="head-angle">Initial Rake from Vertical (degrees):</label>
    <input type="number" id="head-angle" step="0.1" value="27">

    <label for="wheelbase">Wheelbase (mm):</label>
    <input type="number" id="wheelbase" step="1" value="1504">

    <!-- SUSPENSION -->
    <label for="initial-front-shock">Initial Front Fork Length (mm):</label>
    <input type="number" id="initial-front-shock" step="1" value="915">

    <label for="updated-front-shock">Updated Front Fork Length (mm):</label>
    <input type="number" id="updated-front-shock" step="1" value="915">

    <!-- Forks slid up or down in the clamps -->
    <label for="fork-slide">Fork Tube “Slide” in Clamps (mm) [subtract from fork length]:</label>
    <input type="number" id="fork-slide" step="1" value="0">

    <label for="initial-rear-shock">Initial Rear Shock Length (mm) [actual shock eye-to-eye]:</label>
    <input type="number" id="initial-rear-shock" step="1" value="401">

    <label for="updated-rear-shock">Updated Rear Shock Length (mm) [actual shock eye-to-eye]:</label>
    <input type="number" id="updated-rear-shock" step="1" value="401">

    <label for="linkage-ratio">Rear Linkage Ratio:</label>
    <input type="number" id="linkage-ratio" step="0.01" value="3.0">

    <!-- NEW: We treat rearTravel as vertical wheel travel already multiplied by ratio -->
    <label for="rear-travel">Rear Travel (mm) [vertical wheel movement]:</label>
    <input type="number" id="rear-travel" step="1" value="100">

    <!-- FRONT TRAVEL (still along the fork axis, or effectively if you treat it that way) -->
    <label for="front-travel">Front Fork Travel (mm):</label>
    <input type="number" id="front-travel" step="1" value="300">

    <!-- OFFSETS (PERPENDICULAR) -->
    <label for="initial-fork-offset">Initial Fork Offset (mm) [perpendicular]:</label>
    <input type="number" id="initial-fork-offset" step="0.1" value="22">

    <label for="initial-fork-axle-offset">Initial Fork Axle Offset (mm) [perpendicular]:</label>
    <input type="number" id="initial-fork-axle-offset" step="0.1" value="35">

    <label for="updated-fork-offset">Updated Fork Offset (mm) [perpendicular]:</label>
    <input type="number" id="updated-fork-offset" step="0.1" value="22">

    <label for="updated-fork-axle-offset">Updated Fork Axle Offset (mm) [perpendicular]:</label>
    <input type="number" id="updated-fork-axle-offset" step="0.1" value="35">

    <!-- BUTTONS -->
    <button onclick="calculateGeometry()">Calculate Geometry</button>

    <!-- Setup Name / Save -->
    <label for="setup-name">Setup Name:</label>
    <input type="text" id="setup-name" placeholder="e.g. 'High offset wheels'">
    <button onclick="saveResults()">Save Results</button>

    <!-- RESULTS -->
    <div class="results" id="results">
        Results will appear here.
    </div>

    <!-- SIDE PANEL for saved results -->
    <div class="side-panel">
        <h2>Saved Rake/Trail</h2>
        <ul id="saved-list"></ul>
    </div>
</div>

<script>
// We'll store the current results in these globals so "saveResults" can access them
window.currentAngle = 0;
window.currentTrail = 0;

// We'll keep an array in memory to represent the saved setups. We'll also load/save from localStorage.
let savedSetups = [];

// On load, read localStorage
window.addEventListener('load', () => {
    const data = localStorage.getItem('savedSetups');
    if (data) {
        try {
            savedSetups = JSON.parse(data);
            renderSavedSetups();
        } catch (err) {
            console.warn("Failed to parse savedSetups from localStorage:", err);
        }
    }
});

/** Renders the list of saved setups in the side-panel */
function renderSavedSetups() {
    const list = document.getElementById('saved-list');
    list.innerHTML = '';

    savedSetups.forEach((item, index) => {
        const li = document.createElement('li');
        li.textContent = `${item.name} - Rake: ${item.angle.toFixed(1)}°, Trail: ${item.trail.toFixed(1)} mm`;

        // Load button
        const loadBtn = document.createElement('button');
        loadBtn.textContent = 'Load';
        loadBtn.classList.add('load-btn');
        loadBtn.onclick = () => loadSetup(index);
        li.appendChild(loadBtn);

        // Delete button
        const delBtn = document.createElement('button');
        delBtn.textContent = 'Delete';
        delBtn.classList.add('delete-btn');
        delBtn.onclick = () => {
            savedSetups.splice(index, 1);
            localStorage.setItem('savedSetups', JSON.stringify(savedSetups));
            renderSavedSetups();
        };
        li.appendChild(delBtn);
        list.appendChild(li);
    });
}

/** Loads a saved setup from our savedSetups array into the form fields, then runs the calculation. */
function loadSetup(index) {
    const setup = savedSetups[index];
    const data = setup.data;

    // Populate each field
    document.getElementById('initial-front-wheel').value = data.initialFrontWheel;
    document.getElementById('initial-front-tire-width').value = data.initialFrontTireWidth;
    document.getElementById('initial-front-aspect-ratio').value = data.initialFrontAspect;

    document.getElementById('initial-rear-wheel').value = data.initialRearWheel;
    document.getElementById('initial-rear-tire-width').value = data.initialRearTireWidth;
    document.getElementById('initial-rear-aspect-ratio').value = data.initialRearAspect;

    document.getElementById('new-front-wheel').value = data.newFrontWheel;
    document.getElementById('new-front-tire-width').value = data.newFrontTireWidth;
    document.getElementById('new-front-aspect-ratio').value = data.newFrontAspect;

    document.getElementById('new-rear-wheel').value = data.newRearWheel;
    document.getElementById('new-rear-tire-width').value = data.newRearTireWidth;
    document.getElementById('new-rear-aspect-ratio').value = data.newRearAspect;

    document.getElementById('head-angle').value = data.headAngle;
    document.getElementById('wheelbase').value = data.wheelbase;

    document.getElementById('initial-front-shock').value = data.initialFrontShock;
    document.getElementById('updated-front-shock').value = data.updatedFrontShock;
    document.getElementById('fork-slide').value = data.forkSlide;

    document.getElementById('initial-rear-shock').value = data.initialRearShock;
    document.getElementById('updated-rear-shock').value = data.updatedRearShock;
    document.getElementById('linkage-ratio').value = data.linkageRatio;

    document.getElementById('rear-travel').value = data.rearTravel;
    document.getElementById('front-travel').value = data.frontTravel;

    document.getElementById('initial-fork-offset').value = data.initialForkOffset;
    document.getElementById('initial-fork-axle-offset').value = data.initialForkAxleOffset;
    document.getElementById('updated-fork-offset').value = data.updatedForkOffset;
    document.getElementById('updated-fork-axle-offset').value = data.updatedForkAxleOffset;

    // Clear out the 'Setup Name' field
    document.getElementById('setup-name').value = '';

    // Re-run the calculation
    calculateGeometry();
}

/**
 * Saves current inputs + result (rake/trail) to localStorage.
 */
function saveResults() {
    const setupName = document.getElementById('setup-name').value.trim();
    if (!setupName) {
        alert("Please enter a name for this setup before saving.");
        return;
    }

    const angle = window.currentAngle;
    const trl   = window.currentTrail;

    // Gather all input data
    const data = {
        initialFrontWheel: document.getElementById('initial-front-wheel').value,
        initialFrontTireWidth: document.getElementById('initial-front-tire-width').value,
        initialFrontAspect: document.getElementById('initial-front-aspect-ratio').value,

        initialRearWheel: document.getElementById('initial-rear-wheel').value,
        initialRearTireWidth: document.getElementById('initial-rear-tire-width').value,
        initialRearAspect: document.getElementById('initial-rear-aspect-ratio').value,

        newFrontWheel: document.getElementById('new-front-wheel').value,
        newFrontTireWidth: document.getElementById('new-front-tire-width').value,
        newFrontAspect: document.getElementById('new-front-aspect-ratio').value,
        newRearWheel: document.getElementById('new-rear-wheel').value,
        newRearTireWidth: document.getElementById('new-rear-tire-width').value,
        newRearAspect: document.getElementById('new-rear-aspect-ratio').value,

        headAngle: document.getElementById('head-angle').value,
        wheelbase: document.getElementById('wheelbase').value,

        initialFrontShock: document.getElementById('initial-front-shock').value,
        updatedFrontShock: document.getElementById('updated-front-shock').value,
        forkSlide: document.getElementById('fork-slide').value,

        initialRearShock: document.getElementById('initial-rear-shock').value,
        updatedRearShock: document.getElementById('updated-rear-shock').value,
        linkageRatio: document.getElementById('linkage-ratio').value,

        rearTravel: document.getElementById('rear-travel').value,
        frontTravel: document.getElementById('front-travel').value,

        initialForkOffset: document.getElementById('initial-fork-offset').value,
        initialForkAxleOffset: document.getElementById('initial-fork-axle-offset').value,
        updatedForkOffset: document.getElementById('updated-fork-offset').value,
        updatedForkAxleOffset: document.getElementById('updated-fork-axle-offset').value
    };

    const newItem = {
        name: setupName,
        data: data,
        angle: angle,
        trail: trl
    };

    savedSetups.push(newItem);
    localStorage.setItem('savedSetups', JSON.stringify(savedSetups));
    renderSavedSetups();
    document.getElementById('setup-name').value = '';
}

/** Converts rim diameter (inches->mm) plus sidewalls into total diameter (mm). */
function calculateTireDiameter(rimDiameterMm, tireWidth, aspectRatio) {
    // sidewall = tireWidth * (aspectRatio / 100)
    // total = rimDiameterMm + 2 * sidewall
    return rimDiameterMm + 2 * (tireWidth * (aspectRatio / 100));
}

/**
 * Performs the iterative geometry calculation to find final rake & trail,
 * given a particular *effective* front and rear "shock length" (in mm).
 * 
 * Because we said:
 *    - rearTravel is wheel vertical movement,
 *    - initial/updated rear shock lengths are actual eye-to-eye,
 * we still do: (shockLen * linkageRatio) to get actual vertical height at the rear.
 * 
 * @param {number} frontShockLen  The front fork length currently in use (minus any "fork slide").
 * @param {number} rearShockLen   The actual shock length in use (mm). 
 * @param {number} newFrontRadius half the new front tire diameter (mm).
 * @param {number} newRearRadius  half the new rear tire diameter (mm).
 * @param {number} totalUpdatedOffset The sum of triple-tree offset + axle offset (mm, perpendicular).
 * @param {number} initHeadAngleDeg The original rake angle from vertical (degrees).
 * @param {number} wheelbase      The wheelbase (mm).
 * @param {number} initHeightDiff The stock geometry's front vs rear difference (mm).
 * @param {number} linkageRatio   The shock’s ratio to rear wheel vertical motion.
 * 
 * @returns {{angleDeg: number, trail: number}}
 */
function iterativeRakeTrail(
    frontShockLen, 
    rearShockLen,
    newFrontRadius,
    newRearRadius,
    totalUpdatedOffset,
    initHeadAngleDeg,
    wheelbase,
    initHeightDiff,
    linkageRatio
) {
    const maxIter = 20;
    const tolerance = 0.001;
    
    let angleDeg = initHeadAngleDeg;  // start with original angle

    for (let i = 0; i < maxIter; i++) {
        const angleRad = angleDeg * (Math.PI / 180);

        // front & rear relative heights with the current angle:
        //   We subtract (offset * cos(angle)) because "offset" is along the fork axis
        //   and we only want the vertical portion.
        const frontRelativeHeight = newFrontRadius 
                                    + (frontShockLen * Math.cos(angleRad)) 
                                    - (totalUpdatedOffset * Math.cos(angleRad));

        // rear shock length is the actual shock length. Multiply by ratio for vertical.
        const rearRelativeHeight  = newRearRadius + (rearShockLen * linkageRatio);

        const newHeightDiff = frontRelativeHeight - rearRelativeHeight;

        // new angle is the original plus the difference in pitch vs. stock
        const nextAngleDeg = initHeadAngleDeg +
            (
                Math.atan2(newHeightDiff, wheelbase) * (180 / Math.PI)
                - Math.atan2(initHeightDiff, wheelbase) * (180 / Math.PI)
            );

        if (Math.abs(nextAngleDeg - angleDeg) < tolerance) {
            angleDeg = nextAngleDeg;
            break;
        }
        angleDeg = nextAngleDeg;
    }

    // Having settled angleDeg, compute trail
    const angleRadFinal = angleDeg * (Math.PI / 180);
    const offsetHorizontal = totalUpdatedOffset * Math.sin(angleRadFinal);
    const noOffsetTrail = newFrontRadius * Math.tan(angleRadFinal);
    const trail = noOffsetTrail - offsetHorizontal;

    return {
        angleDeg: angleDeg,
        trail: trail
    };
}

/**
 * Main geometry calculation + extra suspension states.
 * Updates global window.currentAngle and window.currentTrail for the normal scenario,
 * plus calculates 4 additional scenarios:
 *   1) 33% rider sag
 *   2) full compression
 *   3) fork compressed, rear extended
 *   4) rear compressed, fork extended
 */
function calculateGeometry() {
    // 1. Grab basic inputs
    const initialFrontWheel     = parseFloat(document.getElementById('initial-front-wheel').value) * 25.4;
    const initialFrontTireWidth = parseFloat(document.getElementById('initial-front-tire-width').value);
    const initialFrontAspect    = parseFloat(document.getElementById('initial-front-aspect-ratio').value);

    const initialRearWheel     = parseFloat(document.getElementById('initial-rear-wheel').value) * 25.4;
    const initialRearTireWidth = parseFloat(document.getElementById('initial-rear-tire-width').value);
    const initialRearAspect    = parseFloat(document.getElementById('initial-rear-aspect-ratio').value);

    const newFrontWheel     = parseFloat(document.getElementById('new-front-wheel').value) * 25.4;
    const newFrontTireWidth = parseFloat(document.getElementById('new-front-tire-width').value);
    const newFrontAspect    = parseFloat(document.getElementById('new-front-aspect-ratio').value);

    const newRearWheel     = parseFloat(document.getElementById('new-rear-wheel').value) * 25.4;
    const newRearTireWidth = parseFloat(document.getElementById('new-rear-tire-width').value);
    const newRearAspect    = parseFloat(document.getElementById('new-rear-aspect-ratio').value);

    const initialHeadAngle = parseFloat(document.getElementById('head-angle').value); // deg from vertical
    const wheelbase        = parseFloat(document.getElementById('wheelbase').value);

    const initialFrontShock = parseFloat(document.getElementById('initial-front-shock').value);
    const updatedFrontShock = parseFloat(document.getElementById('updated-front-shock').value);

    // How much the forks are slid up or down in the clamps
    const forkSlide = parseFloat(document.getElementById('fork-slide').value) || 0;

    const initialRearShock  = parseFloat(document.getElementById('initial-rear-shock').value);
    const updatedRearShock  = parseFloat(document.getElementById('updated-rear-shock').value);

    const linkageRatio = parseFloat(document.getElementById('linkage-ratio').value);

    // "rearTravel" is the total vertical wheel travel from full extension to full compression.
    const rearTravel  = parseFloat(document.getElementById('rear-travel').value);

    // "frontTravel" is the total fork travel (usually along the fork axis).
    const frontTravel = parseFloat(document.getElementById('front-travel').value);

    const initForkOffset   = parseFloat(document.getElementById('initial-fork-offset').value);
    const initForkAxleOff  = parseFloat(document.getElementById('initial-fork-axle-offset').value);
    const updForkOffset    = parseFloat(document.getElementById('updated-fork-offset').value);
    const updForkAxleOff   = parseFloat(document.getElementById('updated-fork-axle-offset').value);

    const totalInitialOffset = initForkOffset + initForkAxleOff;
    const totalUpdatedOffset = updForkOffset + updForkAxleOff;

    // 2. Tire diameters (mm)
    const initFrontTireDiameter = calculateTireDiameter(initialFrontWheel, initialFrontTireWidth, initialFrontAspect);
    const initRearTireDiameter  = calculateTireDiameter(initialRearWheel, initialRearTireWidth, initialRearAspect);
    const newFrontTireDiameter  = calculateTireDiameter(newFrontWheel, newFrontTireWidth, newFrontAspect);
    const newRearTireDiameter   = calculateTireDiameter(newRearWheel, newRearTireWidth, newRearAspect);

    // 3. Stock geometry's front & rear relative heights
    const headAngleRad = initialHeadAngle * (Math.PI / 180);
    const initFrontRelativeHeight =
        (initFrontTireDiameter / 2)
        + (initialFrontShock * Math.cos(headAngleRad))
        - (totalInitialOffset * Math.cos(headAngleRad));

    const initRearRelativeHeight =
        (initRearTireDiameter / 2)
        + (initialRearShock * linkageRatio);

    // The stock difference
    const initHeightDiff = initFrontRelativeHeight - initRearRelativeHeight;

    // ------------------------------------------------------------------
    // SCENARIO A: No extra compression (fully extended)
    // Net front fork length after clamp slide:
    const frontLenA = Math.max(0, updatedFrontShock - forkSlide);
    // Rear is just the updated shock length (no compression)
    const rearLenA  = updatedRearShock;

    const normalResults = iterativeRakeTrail(
        frontLenA,
        rearLenA,
        newFrontTireDiameter / 2,
        newRearTireDiameter / 2,
        totalUpdatedOffset,
        initialHeadAngle,
        wheelbase,
        initHeightDiff,
        linkageRatio
    );

    // Save these to global so "saveResults()" can store them
    window.currentAngle = normalResults.angleDeg;
    window.currentTrail = normalResults.trail;

    // ------------------------------------------------------------------
    // SCENARIO B: 33% sag both ends
    // If you compress the rear wheel by 0.33 * rearTravel (vertical),
    // the shock length changes by (0.33 * rearTravel) / linkageRatio.
    const compressedRearShockB = updatedRearShock - (0.33 * rearTravel) / linkageRatio;

    // Similarly, if the front compresses 0.33 * frontTravel along the fork,
    // new fork length = updatedFrontShock - (0.33 * frontTravel).
    const compressedFrontShockB = updatedFrontShock - (0.33 * frontTravel);

    // Then subtract forkSlide from that final length:
    const frontLenB = Math.max(0, compressedFrontShockB - forkSlide);
    const rearLenB  = Math.max(0, compressedRearShockB);

    const sagResults = iterativeRakeTrail(
        frontLenB,
        rearLenB,
        newFrontTireDiameter / 2,
        newRearTireDiameter / 2,
        totalUpdatedOffset,
        initialHeadAngle,
        wheelbase,
        initHeightDiff,
        linkageRatio
    );

    // ------------------------------------------------------------------
    // SCENARIO C: Full compression both ends
    // Full compression of the rear is "rearTravel" vertical, so shock shortens by (rearTravel / linkageRatio).
    const compressedRearShockC = updatedRearShock - (rearTravel / linkageRatio);
    // Full compression of the front is "frontTravel" along the fork
    const compressedFrontShockC = updatedFrontShock - frontTravel;

    const frontLenC = Math.max(0, compressedFrontShockC - forkSlide);
    const rearLenC  = Math.max(0, compressedRearShockC);

    const fullCompResults = iterativeRakeTrail(
        frontLenC,
        rearLenC,
        newFrontTireDiameter / 2,
        newRearTireDiameter / 2,
        totalUpdatedOffset,
        initialHeadAngle,
        wheelbase,
        initHeightDiff,
        linkageRatio
    );

    // ------------------------------------------------------------------
    // SCENARIO D: Fork fully compressed, rear extended
    // Fork loses frontTravel, shock is still fully extended
    const frontLenD = Math.max(0, (updatedFrontShock - frontTravel) - forkSlide);
    const rearLenD  = updatedRearShock;

    const frontCompRearExtended = iterativeRakeTrail(
        frontLenD,
        rearLenD,
        newFrontTireDiameter / 2,
        newRearTireDiameter / 2,
        totalUpdatedOffset,
        initialHeadAngle,
        wheelbase,
        initHeightDiff,
        linkageRatio
    );

    // ------------------------------------------------------------------
    // SCENARIO E: Shock fully compressed, fork extended
    // Rear compresses the full vertical travel => shock shortens by (rearTravel / ratio)
    const compressedRearShockE = updatedRearShock - (rearTravel / linkageRatio);
    // Fork is fully extended => just subtract slide
    const frontLenE = Math.max(0, updatedFrontShock - forkSlide);

    const rearCompFrontExtended = iterativeRakeTrail(
        frontLenE,
        Math.max(0, compressedRearShockE),
        newFrontTireDiameter / 2,
        newRearTireDiameter / 2,
        totalUpdatedOffset,
        initialHeadAngle,
        wheelbase,
        initHeightDiff,
        linkageRatio
    );

    // ------------------------------------------------------------------
    // DISPLAY
    const resultsDiv = document.getElementById('results');
    resultsDiv.innerHTML = `
        <h3>A) Baseline (Fully Extended)</h3>
        <p>Rake: ${normalResults.angleDeg.toFixed(2)}°<br>
        Trail: ${normalResults.trail.toFixed(1)} mm</p>

        <h3>B) Rider Sag (33% each end)</h3>
        <p>Rake: ${sagResults.angleDeg.toFixed(2)}°<br>
        Trail: ${sagResults.trail.toFixed(1)} mm</p>

        <h3>C) Full Compression (Both Ends)</h3>
        <p>Rake: ${fullCompResults.angleDeg.toFixed(2)}°<br>
        Trail: ${fullCompResults.trail.toFixed(1)} mm</p>

        <h3>D) Fork Fully Compressed, Rear Extended</h3>
        <p>Rake: ${frontCompRearExtended.angleDeg.toFixed(2)}°<br>
        Trail: ${frontCompRearExtended.trail.toFixed(1)} mm</p>

        <h3>E) Shock Fully Compressed, Fork Extended</h3>
        <p>Rake: ${rearCompFrontExtended.angleDeg.toFixed(2)}°<br>
        Trail: ${rearCompFrontExtended.trail.toFixed(1)} mm</p>
    `;
}
</script>
</body>
</html>